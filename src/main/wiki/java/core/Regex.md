# Регулярные выражения
Регулярное выражение (RegEx) – это шаблон для поиска строки в тексте.

Работа с регулярными выражениями в любой Java-программе начинается с создания объекта класса `Pattern`.

```java
// поиск совпадений с шаблоном будет производиться без учета регистра символов.
Pattern pattern = Pattern.compile("java", Pattern.CASE_INSENSITIVE);
```



## Ресурсы
* [JavaRush - Регулярные выражения в Java - 5 частей](https://javarush.ru/groups/posts/136-reguljarnihe-vihrazhenija-v-java-chastjh-1)
* [JavaRush - Регулярные выражения в Java - статья](https://javarush.ru/groups/posts/regulyarnye-vyrazheniya-v-java)


### Обозначения
В регулярных выражениях символы `[ ] \ / ^ $ . | ? * + ( ) { }` имеют специальное значение. Их еще называют «управляющие символы». Поэтому просто так их использовать в строке нельзя.
Как и в Java их необходимо экранировать. Для этого, как и в Java, используется символ `\`.

Если мы хотим описать, что строка должна состоять из трех символов `?`, то нельзя писать так: `?{3}`, т.к. символ `?` является управляющим. Надо сделать так: `\?{3}`, если мы хотим задать символ `\`, то надо написать `\\`.

Если ты попытаешься задать шаблон регулярного выражения в java внутри строки, то тебе нужно будет экранировать символ `\` дважды.


### 1. Метасимволы для поиска совпадений границ строк или текста
|Метасимвол	|Назначение
|:----------|:------------
|`^`	    |начало строки
|`$`	    |конец строки
|`\b`	    |граница слова
|`\B`	    |не граница слова
|`\A`	    |начало ввода
|`\G`	    |конец предыдущего совпадения
|`\Z`	    |конец ввода
|`\z`	    |конец ввода


### 2. Метасимволы для поиска символьных классов
|Метасимвол	|Назначение
|:----------|:------------
|`\d`	    | Любая цифра
|`\D`	    | Любая **не** цифра
|`\s`	    | Пробел, перенос строки, символ табуляции
|`\S`	    | Что угодно, кроме пробела, табуляции, переноса строки
|`\w`	    | Любой цифробуквенный символ или нижнее подчеркивание
|`\W`	    | Любой **не** цифробуквенный символ
|`.`	    | Любой один символ


### 3. Метасимволы для поиска символов редактирования текста
|Метасимвол	|Назначение
|:----------|:------------
|`\t`       | символ табуляции
|`\n`       | символ новой строки
|`\r`       | символ возврата каретки
|`\f`       | переход на новую страницу
|`\u`       | 0085	символ следующей строки
|`\u`       | 2028	символ разделения строк
|`\u`       | 2029	символ разделения абзацев


### 4. Метасимволы для группировки символов
|Метасимвол	|Назначение
|:----------|:------------
|`[абв]`	    | любой из перечисленных (а,б, или в)
|`[^абв]`	    | любой, кроме перечисленных (не а,б, в)
|`[a-zA-Z]`	    | слияние диапазонов (латинские символы от a до z без учета регистра )
|`[a-d[m-p]]`	| объединение символов (от a до d и от m до p)
|`[a-z&&[def]]`	| пересечение символов (символы d,e,f)
|`[a-z&&[^bc]]`	| вычитание символов (символы a, d-z)


### 5. Метасимволы для обозначения количества символов – квантификаторы
Квантификатор всегда следует после символа или группы символов.

|Метасимвол	|Назначение
|:----------|:------------
|`?`	    | один или отсутствует
|`*`	    | ноль или более раз
|`+`	    | один или более раз
|`{n}`	    | n раз
|`{n,}`	    | n раз и более
|`{n,m}`	| не менее n раз и не более m раз

|   Шаблон  |   Описание                |   Примеры
|:----------|:--------------------------|:----------
|`A?`       | Символ A встречается 0..1 раз    | A
|`B+`       | Символ B встречается 1.. ∞ раз    | BBBB
|`C*`       | Символ C встречается 0.. ∞ раз    | CCC
|`D{n}`     | Символ D встречается n раз DDDD, для шаблона | D{4}
|`E{n,}`    | Символ E встречается n.. ∞ раз EEEEEEE, для шаблона | E{2,}
|`F{n,m}`   | Символ F встречается n..m раз EEEE, для шаблона | E{2,4}


### Практические примеры

|   Шаблон  |   Описание                |   Примеры
|:----------|:--------------------------|:----------
| `[a-d]?`  |	Символы a-d встречаются 0..1 раз	|a, b, c, d
| `[b-d,z]+`|	Символы b,c,d,z встречаются 1.. ∞ раз	|b, bcdcdbdbdbdbzzzzbbzbzb, zbz
| `[1,7-9]*`|	Символы 1,7,8,9 встречаются 0.. ∞ раз	|1, 7, 9, 9777, 111199
| `1{5}`    |	Символ 1 встречается 5 раз	|11111
| `[1,2,a,b]{2}` |	Символы 1,2,a,b встречаются 2 раза	|11, 12, 1a, ab, 2b, bb, 22
| `[a,0]{2,3}` |	Символы a,0 встречаются 2..3 раз	|aa, a0,00,0a, aaa,000, a00,0a0, a0a
|`a{3}`|	| <ins>**aaa**</ins> a <ins>**aaa**</ins> a <ins>**aaa**</ins>
|`a{3}$`|	| aaa a aaa a <ins>**aaa**</ins>
|`^a{3}`|	| <ins>**aaa**</ins> a aaa a aaa
|`^a{3}$`|	| aaa a aaa a aaa


### Пример поиска номеров телефона по шаблону
**Критерии валидности:**
1) если номер начинается с '+', то он содержит 12 цифр
2) если номер начинается с цифры или открывающей скобки, то он содержит 10 цифр
3) может содержать 0-2 знаков '-', которые не могут идти подряд
4) может содержать 1 пару скобок '(' и ')' , причем если она есть, то она расположена левее знаков '-'
5) скобки внутри содержат четко 3 цифры
6) номер не содержит букв
7) номер заканчивается на цифру

```regexp
"(\\+[0-9]{2})?\\(?[0-9]{3}\\)?[0-9]{3}-?[0-9]{2}-?[0-9]{2}"
```
* `(\\+[0-9]{2})?` - ищет плюс `\\+` или любую цифру два раза подряд `[0-9]{2}`, и всё это условие МОЖЕТ БЫТЬ 0 или 1 раз `?`.
* `\\(?[0-9]{3}\\)?` - далее МОЖЕТ БЫТЬ открывающаяся скобка `\\(` 0 или 1 раз, далее ДОЛЖНА БЫТЬ любая цифра 3 раза `[0-9]{3}`, далее ДОЛЖНА БЫТЬ закрывающаяся скобка `\\)` и всё это условие может быть 0 или 1 раз `?`. 
* `[0-9]{3}-?` - далее ДОЖНО БЫТЬ 3 любые цифры и 1 дефис и всё это 0 или 1 раз `[0-9]{3}-?`, и так пару раз. 

```java
// result
+380501234567 - true
+38(050)1234567 - true
+38050123-45-67 - true
050123-4567 - true
+38)050(1234567 - false
+38(050)1-23-45-6-7 - false
050ххх4567 - false
050123456 - false
(0)501234567 - false
```
